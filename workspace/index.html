<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EZ AIR 이지에어에 오신 것을 환영합니다.</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@google/generative-ai"></script>
    <script>
        // This is ONLY for local development/demo purposes to bypass backend issues.
        // DO NOT use this in a production environment.
        window.GEMINI_API_KEY = "AIzaSyBDIzlLet6e6M4_WSsQhujozHsXebYtXiE";
    </script>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="../style/intro.css">
    <link rel="stylesheet" href="../style/search_components.css">
    <link rel="stylesheet" href="../style/ai_search.css">
    <link rel="stylesheet" href="../style/ai_results.css">
    <link rel="stylesheet" href="../style/flight_results.css">
    <link rel="stylesheet" href="../common/common.css">
</head>
<body>
    <div class="main-content" id="mainContent">
        <header>
            <div class="inner">
                <nav class="gnb">
                    <div class="logo"><a href="index.html"><img src="../../image/EZAIR_bk.svg" alt="이지에어 로고"></a></div>
                    <ul>
                        <li class="air"><a href="index.html#">항공</a></li>
                        <li class="hotel"><a href="./pages/hotels/hotels.html">호텔</a></li>
                        <li class="package"><a href="./pages/pkgtour/pkgtour.html">패키지</a></li>
                        <li class="forU"><a href="./pages/forYou/forYou.html">EZ for you</a><img src="../../image/gnb_beta.png" alt="이지에어 포유 베타"></li>
                    </ul>
                </nav>
                <div class="btns">
                    <a class="cs" href="./pages/cs/cs.html"><img src="../../image/gnb_cs_bk.svg" alt="이지에어 고객센터"></a>
                    <a class="user" href="./pages/myPage/myPage.html"><img src="../../image/gnb_user_bk.svg" alt="이지에어 마이페이지"></a>
                </div>
            </div>
        </header>
        <div class="hero-section">
            <img class="top_airplane" src="../../image/top_airplane.png" alt="">
            <img class="top_cloud_left" src="../../image/top_cloud_left.png" alt="">
            <h1 class="title">맞춤형 여행의 시작<br>
                <p class="title_2">EZ AIR</p>
            </h1>
            <img class="top_main_cloud" src="../../image/top_main_cloud.png" alt="">
            <img class="top_cloud_right" src="../../image/top_cloud_right.png" alt="">
        </div>
        <main>
            <div id="search">
                <div class="search_box">
                    <div class="search_box_top">
                        <button type="button" class="trip-btn active">왕복</button>
                        <button type="button" class="trip-btn">편도</button>
                        <button type="button" class="trip-btn">다구간</button>
                        <div>
                            <label style="margin-right: 20px;"><input type="radio" name="direct-flight" id="radio2">직항만</label>
                            <label><input type="radio" name="business trip" id="radio1">해외출장입니다.</label>
                        </div>
                    </div>
                    <div class="search_box_mb">
                        <div class="search_box_mid">
                            <div style="position: relative;">
                                <input type="text" placeholder="출발지" id="origin-input">
                                <div id="origin-suggestions" class="suggestions-dropdown"></div>
                            </div>
                            <button class="swap-btn"><img src="../../image/ArrowsClockwise.svg" alt=""></button>
                            <div style="position: relative;">
                                <input type="text" placeholder="도착지" id="destination-input">
                                <div id="destination-suggestions" class="suggestions-dropdown"></div>
                            </div>
                            <div class="calendar-container">
                                <label for="depart-calendar" class="calendar-label" id="depart-label">가는 날</label>
                                <input type="text" id="depart-calendar" readonly>
                                <label for="return-calendar" class="calendar-label" id="return-label">오는 날</label>
                                <input type="text" id="return-calendar" readonly>
                            </div>
                            <div class="passenger-select-wrapper">
                                <button id="passenger-btn">성인 1명, 일반석</button>
                                <div id="passenger-dropdown" class="dropdown">
                                    <label>
                                        인원수:
                                        <select id="passenger-count">
                                            <option value="1">1명</option>
                                            <option value="2">2명</option>
                                            <option value="3">3명</option>
                                            <option value="4">4명</option>
                                        </select>
                                    </label>
                                    <label>
                                        좌석 등급:
                                        <select id="seat-class">
                                            <option value="ECONOMY">일반석</option>
                                            <option value="BUSINESS">비즈니스</option>
                                            <option value="FIRST">일등석</option>
                                        </select>
                                    </label>
                                </div>
                            </div>
                            <button type="submit" id="search-flights-btn">검색</button>
                        </div>
                        <div class="search_box_bottom">
                            <div class="ai-assistant-box">
                                <div class="ai-header">
                                    <span class="ai-badge">AI</span>
                                    <strong><span class="bold">AI 항공권 어시스턴트</span></strong>
                                    <span class="desc">자연어로 편리하게 항공권을 검색하고 추천받으세요</span>
                                </div>
                                <div class="ai-ip-box">
                                    <img src="../../image/ai_search_cloud.png" alt="구름" class="ai-cloud" />
                                    <div class="ai-input-box">
                                        <input type="text" class="ai-input" placeholder="다음주 금요일 서울에서 제주도 가는 가장 저렴한 항공권 찾아줘" />
                                        <button class="ai-search-btn"></button>
                                        <div class="ai-notification" id="ai-notification"></div>
                                    </div>
                                    <div class="ai-tags">
                                        <div class="tag-wrapper">
                                            <span class="tag-item">✨ 자연어 검색</span>
                                            <span class="tag-item">🎯 맞춤 추천</span>
                                            <span class="tag-item">⚡ 실시간 비교</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="top_right">
                <div class="empty1"></div>
                <div class="checklist-box">
                    <p class="checklist-title">여행 전에 필수 체크!</p>
                    <ul class="checklist-items">
                        <li>
                            <img src="../../image/top_right_img1.png" alt="출장 아이콘">
                            <div class="text-box">
                                <strong>해외 출장 가시나요?</strong>
                                <span>출장 선호 항공편 알려드려요</span>
                            </div>
                            <span class="arrow">›</span>
                        </li>
                        <li>
                            <img src="../../image/top_right_img2.png" alt="호텔 아이콘">
                            <div class="text-box">
                                <strong>호텔 추천 For U</strong>
                                <span>맞춤 호텔을 추천해드려요</span>
                            </div>
                            <span class="arrow">›</span>
                        </li>
                        <li>
                            <img src="../../image/top_right_img3.png" alt="세계 아이콘">
                            <div class="text-box">
                                <strong>전세계 모든곳검색</strong>
                                <span>인기 항공편만 가격순으로</span>
                            </div>
                            <span class="arrow">›</span>
                        </li>
                    </ul>
                </div>
            </div>
            <section class="ai-recommendation-section" role="region" aria-label="AI 기반 여행 추천">
                <div class="ai-section-header-wrap">
                    <h2 class="ai-section-title">구름이 추천 여행지</h2>
                    <p class="ai-section-description">구름이가 AI 알고리즘으로 맞춤 여행지를 EZ하게 찾아봐요!</p>
                    <div class="ai-header-buttons">
                        <button class="ai-header-btn active"><img src="../../image/002_airplane-solid.svg" alt="항공 아이콘">항공편</button>
                        <button class="ai-header-btn"><img src="../../image/002_hotel-fill.svg" alt="숙박 아이콘">숙박</button>
                    </div>
                </div>
                <div class="ai-content-wrapper">
                    <div class="ai-keywords-panel">
                        <h3 class="ai-panel-title">AI 키워드</h3>
                        <div class="word-cloud-container">
                            <svg id="word-cloud-svg" width="100%" height="100%" viewBox="0 0 400 450" xmlns="http://www.w3.org/2000/svg">
                                <path d="M50 100 Q150 50 200 100" stroke="#4a90e2" stroke-width="1" fill="none"/>
                                <path d="M150 150 Q250 200 200 250" stroke="#4a90e2" stroke-width="1" fill="none"/>
                                <circle cx="200" cy="225" r="120" fill="none" stroke="#ffffff" stroke-width="2"/>
                                <circle class="particle" cx="100" cy="100" r="3" fill="#4a90e2" opacity="0.5"/>
                                <circle class="particle" cx="300" cy="200" r="3" fill="#4a90e2" opacity="0.5"/>
                                <circle class="particle" cx="150" cy="350" r="3" fill="#4a90e2" opacity="0.5"/>
                            </svg>
                            <div class="ai-status-indicator">
                                <svg class="ai-loading-spinner" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c помощи.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.527.288 1.048.337 1.5.15z"></path>
                                </svg>
                                AI 분석 중...
                            </div>
                        </div>
                        <div class="ai-keyword-controls">
                            <select id="category-filter" class="ai-filter-select" onchange="filterKeywords(this.value)" aria-label="키워드 카테고리 필터">
                                <option value="all">모든 추천</option>
                                <option value="city">도시 탐험</option>
                                <option value="nature">자연 & 휴식</option>
                                <option value="culture">역사 & 문화</option>
                                <option value="adventure">액티비티 & 모험</option>
                                <option value="romantic">로맨틱 여행</option>
                            </select>
                            <button class="ai-more-keywords-btn glow-button" onclick="shuffleKeywords()" aria-label="다른 키워드 보기">
                                다른 키워드 보기
                            </button>
                        </div>
                    </div>
                    <div class="ai-recommendation-cards-panel">
                        <h3 class="ai-panel-title">키워드 추천 여행지</h3>
                        <div class="carousel-wrapper">
                            <div id="recommendation-grid" class="recommendation-grid">
                                <!-- Cards will be dynamically inserted here -->
                            </div>
                        </div>
                        <button class="carousel-button left" onclick="navigateCards(-1)" aria-label="이전 추천 보기">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
                        </button>
                        <button class="carousel-button right" onclick="navigateCards(1)" aria-label="다음 추천 보기">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </button>
                    </div>
                </div>
            </section>
            <section class="theme-travel">
                <h2>테마별 여행지</h2>
                <div class="theme-grid">
                    <a href="#" class="theme-card"><img src="../../image/003_img1.png" alt="#가족여행"><div class="text-box"><strong>#가족여행</strong><span class="price">77,901원</span> - 06월 출발</div></a>
                    <a href="#" class="theme-card"><img src="../../image/003_img2.png" alt="#휴양지"><div class="text-box"><strong>#휴양지</strong><span class="price">132,053원</span> - 09월 출발</div></a>
                    <a href="#" class="theme-card"><img src="../../image/003_img3.png" alt="#커플여행"><div class="text-box"><strong>#커플여행</strong><span class="price">92,682원</span> - 07월 출발</div></a>
                    <a href="#" class="theme-card"><img src="../../image/003_img4.png" alt="#신혼여행"><div class="text-box"><strong>#신혼여행</strong><span class="price">182,950원</span> - 07월 출발</div></a>
                    <a href="#" class="theme-card"><img src="../../image/003_img5.png" alt="#태교여행"><div class="text-box"><strong>#태교여행</strong><span class="price">132,053원</span> - 09월 출발</div></a>
                    <a href="#" class="theme-card"><img src="../../image/003_img6.png" alt="#해외테마파크"><div class="text-box"><strong>#해외테마파크</strong><span class="price">92,682원</span> - 07월 출발</div></a>
                    <a href="#" class="theme-card"><img src="../../image/003_img7.png" alt="#해변"><div class="text-box"><strong>#해변</strong><span class="price">141,936원</span> - 09월 출발</div></a>
                    <a href="#" class="theme-card"><img src="../../image/003_img8.png" alt="#스킨스쿠버다이빙"><div class="text-box"><strong>#스킨스쿠버다이빙</strong><span class="price">155,966원</span> - 09월 출발</div></a>
                </div>
                <div class="more-btn-wrap">
                    <button class="more-theme">추천 항공권 더보기</button>
                </div>
            </section>
            <div id="flight-results-section" style="display: none;">
                <hr>
                <div class="ai-result-header">
                    <h2>AI 검색 결과</h2>
                    <p>AI 어시스턴트가 찾은 맞춤 항공편입니다.</p>
                </div>
                <div id="flight-results">
                    <p id="no-results-message" style="display: none;">항공편을 찾을 수 없습니다.</p>
                </div>
            </div>
            <div id="ai-results-modal" class="modal" aria-modal="true" role="dialog">
                <div class="modal-content">
                    <span class="close-button" aria-label="Close modal">×</span>
                    <h2>AI 어시스턴트</h2>
                    <div id="modal-flight-results" class="flight-results-container">
                        <p id="ai-status-message">AI 어시스턴트에게 무엇이든 물어보세요!</p>
                        <div class="ai-loading-status" style="display: none;">
                            <div class="loading-wrapper">
                                <div id="ai-loading-lottie"></div>
                                <p class="main-loading-text">EZ AI가 이지님을 위한<br>최적의 항공권 티켓을 찾고 있어요.</p>
                                <div class="ai-loading-progress">
                                    <div class="step" data-status="active"><span class="circle">1</span>출발지 확인</div>
                                    <div class="step"><span class="circle">2</span>날짜 체크</div>
                                    <div class="step"><span class="circle">3</span>가격 비교</div>
                                    <div class="step"><span class="circle">4</span>최종 분석</div>
                                </div>
                            </div>
                        </div>
                        <div id="ai-final-results" style="display: none;">
                            <div class="ai-insight">
                                <span class="ai-insight-badge">AI Insight</span>
                                <p id="ai-insight-text"></p>
                            </div>
                            <div id="ai-flight-cards" class="custom-scrollbar"></div>
                            <div class="ai-recommendation-text" style="display: none;">
                                <h3 class="ai-recommendation-title">AI 어시스턴트의 추가 추천</h3>
                                <p id="ai-additional-recommendation"></p>
                            </div>
                            <div class="ai-follow-up-actions" style="display: none;">
                                <div class="ai-chat-bubble">💡 이런 것도 궁금하신가요?</div>
                                <h3>다음 단계</h3>
                                <div class="follow-up-buttons"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="site-footer">
                <div class="footer-actions">
                    <button class="share-btn"><img src="../../image/bottom_bt1.svg" alt="공유하기"> 공유하기</button>
                    <button class="top-btn"><img src="../../image/bottom_bt2.svg" alt="맨위로"> 맨위로</button>
                </div>
                <div class="footer-links">
                    <button class="footer-login">로그인</button>
                    <button class="footer-service">전체서비스</button>
                </div>
                <p class="footer-desc">이지에어 항공권은 제휴사에서 제공하는 항공권 스케줄 및 가격정보를 비교, 중개하는 서비스로서 이지에어(주)는 통신판매의 당사자가 아니며, 항공권 검색 결과, 구매 및 환불 등과 관련한 의무와 책임은 각 판매자에게 있습니다.</p>
                <p class="footer-company">이지에어(주) 사업자 정보</p>
                <div class="footer-info">
                    <a href="#">사업자정보 공개</a> |
                    <a href="#">이용약관</a> |
                    <a href="#" class="highlight">개인정보처리방침</a> |
                    <a href="#">고객센터</a>
                </div>
                <p class="footer-copy">© EZAir Corporation</p>
            </footer>
        </main>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/TextPlugin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.0/lottie.min.js"></script>
    <script src="../common/common.js"></script>
    <script src="./script.js"></script>
    <script src="script/amadeus_search.js"></script>
    <script type="module" src="../script/config.js"></script>
    <script type="module" src="../script/gemini_search.js"></script>
    <script type="module" src="../script/intro.js"></script>
</body>
</html>